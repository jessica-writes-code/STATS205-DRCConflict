oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
friedman.test(H_MEDIAN ~ OCC_TITLE | STATE, data=oes.red.f)
mu = median(as.matrix(oes.red)); mu
oes.red = as.matrix(oes.red) - mu
colMedian = apply(oes.red,2,median); colMedian
oes.red = oes.red - colMedian
df = rbind(coleff=c(colMedian),oes.red)
oes.red = rbind(coleff=c(colMedian),oes.red)
head(oes.red)
oes.red = rbind(roweff=rep(0,6),oes.red); oes.red[1,1] = mu
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red)); mu
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median); colMedian
oes.red = oes.red - colMedian
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = rbind(roweff=rep(0,ncol(oes.red)),oes.red); oes.red[1,1] = mu
head(oes.red)
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
source('~/.active-rstudio-document', echo=TRUE)
oes <- read.xlsx(paste0(input,"/oesm15st/state_M2015_dl.xlsx"), 1)
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red)); mu
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median); colMedian
oes.red = oes.red - colMedian
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = cbind(roweff=rep(0,ncol(oes.red)),oes.red); oes.red[1,1] = mu
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red)); mu
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median); colMedian
oes.red = oes.red - colMedian
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = cbind(roweff=rep(0,nrow(oes.red)),oes.red); oes.red[1,1] = mu
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red)); mu
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median)
oes.red = oes.red - colMedian
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = cbind(roweff=rep(0,nrow(oes.red)),oes.red); oes.red[1,1] = mu
head(oes.red)
rowMedian = apply(oes.red[,-1],1,median); rowMedian
oes.red[,1] = oes.red[,1] + rowMedian
oes.red[,1] = oes.red[,1] + rowMedian
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian); df
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red))
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median)
oes.red = oes.red - colMedian
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = cbind(roweff=rep(0,nrow(oes.red)),oes.red); oes.red[1,1] = mu
# Compute row median
rowMedian = apply(oes.red[,-1],1,median); rowMedian
# Create new residual table from row medians
oes.red[,1] = oes.red[,1] + rowMedian
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian); oes.red
colMedian = apply(oes.red[-1,],2,median); colMedian
oes.red[-1,]
colMedian
?sweep
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red))
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median)
oes.red = oes.red - colMedian
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = cbind(roweff=rep(0,nrow(oes.red)),oes.red); oes.red[1,1] = mu
# Compute row median
rowMedian = apply(oes.red[,-1],1,median)
# Create new residual table from row medians
oes.red[,1] = oes.red[,1] + rowMedian
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian)
## Second Iteration
# Add column effects to top margin and subtract from residuals
colMedian = apply(oes.red[-1,],2,median)
oes.red[1,] = oes.red[1,]+colMedian
oes.red[-1,] = sweep(oes.red[-1,],2,colMedian)
# Add row effects to left margin and subtract from residuals
rowMedian = apply(df[,-1],1,median)
oes.red[,1] = oes.red[,1]+rowMedian
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian); oes.red
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
mu = median(as.matrix(oes.red))
oes.red = as.matrix(oes.red) - mu
oes.red
colMedian = apply(oes.red,2,median)
colMedian
oes.red = oes.red - colMedian
head(oes.red$H_MEDIAN.Wyoming)
oes.red
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
mu = median(as.matrix(oes.red))
oes.red = as.matrix(oes.red) - mu
colMedian = apply(oes.red,2,median)
colMedian
for (i in 1:ncol(oes.red)) {
oes.red[i] = oes.red[i] - colMedian[i]
}
oes.red
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red))
oes.red = as.matrix(oes.red) - mu
oes.red[50]
oes.red[,50]
colMedian = apply(oes.red,2,median)
colMedian[50]
for (i in 1:ncol(oes.red)) {
oes.red[,i] = oes.red[,i] - colMedian[i]
}
oes.red[,50]
oes.red = rbind(coleff=c(colMedian),oes.red)
oes.red
oes.red = cbind(roweff=rep(0,nrow(oes.red)),oes.red); oes.red[1,1] = mu
oes.red[1:2,]
oes.red[,1:2]
colMedian
rowMedian = apply(oes.red[,-1],1,median)
rowMedian
oes.red[,1] = oes.red[,1] + rowMedian
oes.red
sweep(oes.red[,-1],1,rowMedian)
oes.red[,50]
sweep(oes.red[,-1],1,rowMedian)[,50]
rowMedian
oes.red[,49]
median(oes.red[23,])
oes.red[32,]
oes.red[23,]
oes.red[,50]
oes.red[,51]
oes.red
rowMedian
sweep(oes.red[,-1],1,rowMedian)
rowMedian
oes.red
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian)
oes.red
# Create dataframe
## Initial subsetting
oes.red <- subset(oes, OCC_GROUP == "major" & H_MEDIAN != "*" & !(STATE %in% c("Guam","Puerto Rico","Virgin Islands","District of Columbia")))
oes.red <- as.data.frame(cbind(oes.red$STATE, oes.red$OCC_TITLE, oes.red$H_MEDIAN))
names(oes.red) <- c("STATE","OCC_TITLE","H_MEDIAN")
## Replace "#"
oes.red$H_MEDIAN <- as.character(oes.red$H_MEDIAN)
oes.red$H_MEDIAN[oes.red$H_MEDIAN == "#"] <- "90"
oes.red$H_MEDIAN <- as.numeric(oes.red$H_MEDIAN)
## Subset to occupations in all states
### Count states where occupations exist
COUNT <- rep(1,nrow(oes.red))
count.occs <- aggregate(COUNT, by=list(oes.red$OCC_TITLE), sum)
names(count.occs) <- c("OCC_TITLE", "NUM_STATES")
### Merge counts
oes.red <- merge(oes.red, count.occs)
oes.red <- subset(oes.red, NUM_STATES==50)
## Re-factor Data
oes.red$STATE <- factor(oes.red$STATE)
oes.red$OCC_TITLE <- factor(oes.red$OCC_TITLE)
oes.red <- oes.red[,-4]
# Reshape Data Frame
oes.red.f <- oes.red
oes.red <- reshape(oes.red, timevar = "STATE", idvar=c("OCC_TITLE"), direction = "wide")
rownames(oes.red) <- oes.red$OCC_TITLE
oes.red <- oes.red[,-1]
oes.red <- oes.red[,order(names(oes.red))]
# Show Table
oes.red
# Compute overall mean & subtract it from all observations
mu = median(as.matrix(oes.red))
oes.red = as.matrix(oes.red) - mu
# Compute column medians & subtract them from observations in corresponding columns
colMedian = apply(oes.red,2,median)
for (i in 1:ncol(oes.red)) {
oes.red[,i] = oes.red[,i] - colMedian[i]
}
# Add column median to residual table
oes.red = rbind(coleff=c(colMedian),oes.red)
# Add and overall value to residual table
oes.red = cbind(roweff=rep(0,nrow(oes.red)),oes.red); oes.red[1,1] = mu
# Compute row median
rowMedian = apply(oes.red[,-1],1,median)
# Create new residual table from row medians
oes.red[,1] = oes.red[,1] + rowMedian
oes.red[,51]
rowMedian
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian)
oes.red[,51]
oes.red[,1]
colMedian = apply(oes.red[-1,],2,median)
colMedian
oes.red[1,] = oes.red[1,]+colMedian
oes.red[-1,] = sweep(oes.red[-1,],2,colMedian)
oes.red[,51]
rowMedian = apply(df[,-1],1,median)
rowMedian = apply(oes.red[,-1],1,median)
oes.red[,1] = oes.red[,1]+rowMedian
oes.red[,-1] = sweep(oes.red[,-1],1,rowMedian); oes.red
head(oes.red)
oes.red[1,]
oes.red[,1]
oes.red[,1:2]
outer(oes.red[1,], oes.red[,1])
outer(oes.red[,1],oes.red[1,])
tukey.list <- unlist(outer(oes.red[,1],oes.red[1,]))
View(tukey.list)
resid.list <- unlist(oes.red)
outer(oes.red[,1],oes.red[1,])
tukey.list <- as.vector(outer(oes.red[,1],oes.red[1,]))
tukey.list
resid.list <- as.vector(oes.red)
resid.list
oes.red
plot(tukey.list, resid.list)
resid.list <- as.vector(oes.red[-1,-1])
tukey.list <- as.vector(outer(oes.red[-1,1],oes.red[1,-1]))
plot(tukey.list, resid.list)
tukey.list <- as.vector(outer(oes.red[-1,1],oes.red[1,-1]))/mu
resid.list <- as.vector(oes.red[-1,-1])
plot(tukey.list, resid.list, main="Tukey Additivity Plot", xlab="Diagnostic Comparison Values", ylab="Residuals")
dev.off()
# Create Tukey Additivity Plot
tukey.list <- as.vector(outer(oes.red[-1,1],oes.red[1,-1]))/mu
resid.list <- as.vector(oes.red[-1,-1])
plot(tukey.list, resid.list, main="Tukey Additivity Plot", xlab="Diagnostic Comparison Values", ylab="Residuals")
